{% extends "issue/base.html" %}
{% block content %}

<script src="https://cdn.zingchart.com/zingchart.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<div class="col-md-9">
    <p>Hello {{user.username}}</p>
    <div class ="col-md-9" style="height: 100%; width: 100%;" id="MyChart"></div>

    <script>
        var state={
            "items":[],
            "values":[],
        }
        $.ajax({
            method: 'GET',
            url: "priority_data",
            success: function(response){
                console.log('RESPONSE:', response)
                for(var i in response){
                    var key = Object.keys(response[i])[0]
                    var value = Object.values(response[i])[0]

                    state.items.push(key)
                    state.values.push(value)
                }
                console.log('STATE:', state)
                buildChart()
            }
        })

        function buildChart(){
            var chartData = {
            "type": "bar",
            "scale-x" :{
                "values": state.items
            },
            "series":[
                {
                    "values": state.values
                }
            ]
            }

            zingchart.render({
                id: "MyChart",
                data: chartData,
            });

        }
    </script>
</div>
{%endblock content%}